好的，這是一份根據先前所有討論內容匯總而成的完整規格說明書。

------



### **專案：** 情境式快捷選單 (Contextual Quick Menu)





### **功能：** Pop-up Menu 元件規格書





### **版本：** 1.1





### **日期：** 2025年8月5日



------



### **1. 總覽 (Overview)**



此元件是一個專為 macOS 設計的彈出式選單。當使用者在應用程式中選取文字後，此選單會自動出現在選取範圍附近。它的核心目的是提供一組與當前情境高度相關的快捷操作（如：剪下、複製、搜尋等），旨在減少滑鼠長距離移動和右鍵選單的層級，從而顯著提升使用者操作效率。

此設計強調簡潔、直觀、反應快速，並能完美融入 macOS 的原生視覺環境，支援系統的淺色與深色模式。



### **2. 互動行為 (Interaction Behavior)**





#### **2.1 觸發條件 (Activation)**



- **滑鼠觸發：** 在任何可編輯或可選取的文字區域，當使用者使用滑鼠拖曳完成一段文字的選取後，選單會立即出現在選取範圍的上方或下方。
- **鍵盤觸發：** （可選）當使用者透過鍵盤（如 `Shift` + `方向鍵`）完成文字選取後，選單可延遲 0.5 秒後出現，以避免在連續選取過程中造成干擾。



#### **2.2 出現與消失 (Appearance & Dismissal)**



- **位置：** 預設出現在選取文字的結尾處下方。若下方螢幕空間不足，則自動改為出現在上方。
- **消失條件：**
  - 在選單外的任何區域點擊滑鼠。
  - 按下 `ESC` 鍵。
  - 使用者點擊取消文字選取狀態。
  - 成功執行選單中的任一操作後，選單立即消失。
  - Timeout 1.5 秒



#### **2.3 按鈕互動 (Button Interaction)**



- **預設狀態 (Default):** 按鈕僅顯示圖示或文字，無特殊背景。
- **懸停狀態 (Hover):** 當滑鼠指標移動到某個按鈕上時，該按鈕會顯示一個彩色的背景高亮。高亮效果應有平滑的過渡動畫。
- **點擊狀態 (Active/Pressed):** 當滑鼠按下按鈕但尚未放開時，按鈕的高亮背景顏色會輕微變深或按鈕整體微幅縮小，提供即時的觸覺回饋。點擊放開後執行對應功能。



### **3. 視覺規格 (Visual Specifications)**



此元件的視覺外觀會自動適應 macOS 的系統設定。



#### **3.1 容器 (Container)**



- **形狀：** 水平藥丸形（Pill Shape），即左右為半圓形的圓角矩形。
- **高度：** `40px`
- **寬度：** 根據內容動態調整。
- **內邊距 (Padding):** 上下 `0px`，左右 `10px`。
- **圓角半徑 (Corner Radius):** `20px` (高度的一半)。

| 屬性 (Property)     | 暗色模式 (Dark Mode)               | 亮色模式 (Light Mode)              |
| ------------------- | ---------------------------------- | ---------------------------------- |
| **背景顏色/透明度** | `#282828` 搭配 `95%` 透明度        | `#FFFFFF` 搭配 `90%` 透明度        |
| **陰影 (Shadow)**   | `0px 4px 12px rgba(0, 0, 0, 0.25)` | `0px 3px 10px rgba(0, 0, 0, 0.12)` |



#### **3.2 按鈕 (Buttons)**



- **佈局：** 按鈕之間由一條細分隔線隔開。
- **文字按鈕 (Cut, Copy, Paste):**
  - **字體:** San Francisco (或其他系統無襯線字體)
  - **字重:** `Medium`
  - **字號:** `14px`
  - **邊距:** 上下 `10px`，左右 `12px`
- **圖示按鈕:**
  - **圖示尺寸:** `20px * 20px`
  - **按鈕點擊區域:** `40px * 40px`

| 狀態 (State)            | 暗色模式 (Dark Mode) | 亮色模式 (Light Mode) |
| ----------------------- | -------------------- | --------------------- |
| **預設文字/圖示顏色**   | `#E0E0E0` (淺灰色)   | `#2C2C2C` (深灰色)    |
| **懸停時文字/圖示顏色** | `#FFFFFF` (純白)     | `#FFFFFF` (純白)      |

- **重要說明：** 為確保在任何彩色高亮背景下都具備最佳可讀性，**一旦按鈕進入懸停（高亮）狀態，其上的文字或圖示顏色必須變為純白色**。



#### **3.3 分隔線 (Separator)**



- **寬度：** `1px`

| 模式 (Mode)               | 顏色 (Color) |
| ------------------------- | ------------ |
| **暗色模式 (Dark Mode)**  | `#4A4A4A`    |
| **亮色模式 (Light Mode)** | `#DCDCDC`    |



### **4. 圖示與功能對應 (Icon & Function Mapping)**



| 圖示 (Icon) | 暫定功能 (Function) | 說明                                   |
| ----------- | ------------------- | -------------------------------------- |
| 🔍 (放大鏡)  | 搜尋 (Search)       | 使用預設搜尋引擎搜尋選取的文字。       |
| **Cut**     | 剪下 (Cut)          | 剪下選取的文字。                       |
| **Copy**    | 複製 (Copy)         | 複製選取的文字。                       |
| **Paste**   | 貼上 (Paste)        | 將剪貼簿內容貼上（若有選取則為取代）。 |



### **5. 主題與客製化 (Theming & Customization)**



- **高亮顏色自訂：** 使用者應可在 App 設定中，自訂按鈕懸停時的高亮顏色。此設定獨立於系統的淺色/深色模式。
- **預設顏色盤 (Hex Codes):**
  - **紅色:** `#E54B4B`
  - **橘色:** `#F59B32`
  - **黃色:** `#F7D952`
  - **綠色:** `#8AD552`
  - **紫色:** `#A073D4`
  - **灰色:** `#9E9E9E`



### **6. 動畫效果 (Animation)**



- **選單出現：** `Fade In` (淡入) + `Scale Up` (輕微放大)。持續時間 `150ms`，使用 `ease-out` 曲線。
- **選單消失：** `Fade Out` (淡出)。持續時間 `100ms`。
- **懸停效果：** 高亮背景的出現與消失應有平滑過渡。`transition: background-color 100ms ease-in-out;`



### **7. 技術與無障礙備註 (Technical & Accessibility Notes)**



- **圖示格式：** 強烈建議使用 SVG 格式，以確保在所有 Retina 螢幕上都能清晰銳利地縮放。
- **無障礙 (Accessibility):**
  - 所有僅有圖示的按鈕，都必須包含 `aria-label` 或等效的輔助說明屬性，供螢幕報讀器（VoiceOver）讀取其功能。
  - 需確保選單出現後，使用者可以透過鍵盤的 `Tab` 鍵和 `方向鍵` 進行導航，並使用 `Enter` 鍵觸發所選按鈕的功能。



### **8. 系統外觀適應性 (System Appearance Adaptation)**



- **自動切換：** 元件必須能即時響應 macOS 系統的外觀變更（從「系統設定」>「外觀」中切換）。當系統主題在淺色與深色模式間切換時，元件應自動、平滑地更新其樣式，無需使用者重新啟動應用程式。
- **實作建議：** 在 SwiftUI/AppKit 中，開發者應使用能夠自動適應的系統顏色（如 `Color.primary`, `NSColor.textColor`）或監聽系統的 `effectiveAppearance` 變化來實現此功能。
